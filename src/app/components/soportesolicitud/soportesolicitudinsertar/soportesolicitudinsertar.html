
<div class="form-container">
  
  
  <h2>{{ titulo }}</h2>


  <form [formGroup]="form" (ngSubmit)="aceptar()">

   
    <div class="campo">
      <label for="titulo">Título de la Solicitud</label>
      
   
      <input 
        type="text" 
        id="titulo"
        formControlName="titulo" 
        placeholder="Ej. Problema con registro de transporte"
        [ngClass]="{'input-error': form.get('titulo')?.invalid && form.get('titulo')?.touched}"
      >
      
     
      <div class="mensaje-error" *ngIf="form.get('titulo')?.invalid && form.get('titulo')?.touched">
        El título es obligatorio (máximo 100 caracteres).
      </div>
    </div>

  
    <div class="campo">
      <label for="descripcion">Descripción del Problema</label>
      
     
      <textarea 
        id="descripcion"
        formControlName="descripcion" 
        rows="4"
        placeholder="Describe detalladamente el problema que enfrentas..."
        [ngClass]="{'input-error': form.get('descripcion')?.invalid && form.get('descripcion')?.touched}"
      ></textarea>
      
      <div class="mensaje-error" *ngIf="form.get('descripcion')?.invalid && form.get('descripcion')?.touched">
        La descripción es obligatoria (máximo 255 caracteres).
      </div>
    </div>

   
    <div class="campo">
      <label for="fechahora">Fecha y Hora del Problema</label>
      
      
      <mat-form-field appearance="outline" style="width: 100%;">
        
        
        <input 
          matInput 
          [matDatepicker]="picker" 
          formControlName="fechahora"
          placeholder="Selecciona fecha y hora"
        >
        
       
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        
      
        <mat-datepicker #picker></mat-datepicker>
        
       
        <mat-error *ngIf="form.get('fechahora')?.invalid">
          La fecha y hora son obligatorias.
        </mat-error>
      </mat-form-field>
    </div>

   
    <div class="campo">
      <label for="Apartado">Apartado/Sección</label>
      
      <mat-form-field appearance="outline" style="width: 100%;">
        
      
        <mat-select formControlName="Apartado" placeholder="Selecciona un apartado">
          
         
          <mat-option *ngFor="let a of apartados" [value]="a">
            {{ a }}
          </mat-option>
        </mat-select>
        
        <mat-error *ngIf="form.get('Apartado')?.invalid">
          Debes seleccionar un apartado.
        </mat-error>
      </mat-form-field>
    </div>

   
    <div class="campo">
      <label for="idUsuario">ID Usuario</label>
      
    
      <input 
        type="number" 
        id="idUsuario"
        formControlName="idUsuario" 
        placeholder="ID del usuario"
        min="1"
        [ngClass]="{'input-error': form.get('idUsuario')?.invalid && form.get('idUsuario')?.touched}"
      >
      
      <div class="mensaje-error" *ngIf="form.get('idUsuario')?.invalid && form.get('idUsuario')?.touched">
        El ID de usuario es obligatorio (mínimo 1).
      </div>
      
    
    </div>

  
    <div class="acciones">
      
   
      <button type="submit" class="btn-guardar" [disabled]="form.invalid">
        Guardar
      </button>

    
      <button type="button" class="btn-cancelar" routerLink="/home/soportesolicitudes/listar">
        Cancelar
      </button>
    </div>

  </form>
</div>
