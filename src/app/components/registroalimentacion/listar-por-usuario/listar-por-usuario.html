<div class="contenedor">
  <!-- TARJETA DE B√öSQUEDA -->
  <mat-card class="search-card">
    <h2>üçΩÔ∏è Historial de Alimentaci√≥n por Usuario</h2>
    
    <div class="search-box">
      <mat-form-field appearance="outline">
        <mat-label>ID del Usuario</mat-label>
        <input matInput type="number" [(ngModel)]="idUsuarioBuscar" placeholder="Ej. 1" (keyup.enter)="buscar()">
        
        <!-- Bot√≥n de b√∫squeda -->
        <button mat-icon-button matSuffix (click)="buscar()" [disabled]="!idUsuarioBuscar">
          <mat-icon>search</mat-icon>
        </button>
      </mat-form-field>
    </div>
  </mat-card>

  <!-- TABLA DE RESULTADOS (Se muestra solo si hay datos) -->
  <div class="table-container mat-elevation-z8" *ngIf="dataSource.data.length > 0; else noData">
    <table mat-table [dataSource]="dataSource">

      <!-- ID Registro -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.idRegistroAlimentacion}} </td>
      </ng-container>

      <!-- ALIMENTO (Usamos la funci√≥n getNombreAlimento) -->
      <ng-container matColumnDef="alimento">
        <th mat-header-cell *matHeaderCellDef> Alimento </th>
        <!-- Llamamos a la funci√≥n del TS para traducir el ID a Nombre -->
        <td mat-cell *matCellDef="let element" class="bold-text"> 
          {{ getNombreAlimento(element.idAlimento) }} 
        </td>
      </ng-container>

      <!-- Porciones -->
      <ng-container matColumnDef="porciones">
        <th mat-header-cell *matHeaderCellDef> Porciones </th>
        <td mat-cell *matCellDef="let element"> 
          <span class="badge">{{element.porciones}}</span>
        </td>
      </ng-container>

      <!-- Fecha -->
      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef> Fecha </th>
        <td mat-cell *matCellDef="let element"> {{element.fecha | date:'dd/MM/yyyy'}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    
    <!-- Paginador -->
    <mat-paginator [pageSizeOptions]="[5, 10]" showFirstLastButtons></mat-paginator>
  </div>

  <!-- ESTADO VAC√çO (Mensaje cuando no hay datos o no se ha buscado) -->
  <ng-template #noData>
    <div class="empty-state" *ngIf="busquedaRealizada || mensaje">
      <mat-icon>no_meals</mat-icon>
      <p>{{ mensaje }}</p>
    </div>
  </ng-template>
</div>